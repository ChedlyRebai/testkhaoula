{% extends "admin/base_admin.html.twig" %}

{% block title %}Éditer un Post{% endblock %}

{% block body %}

<div class="d-sm-flex align-items-center justify-content-between mb-4">
  <h1 class="h3 mb-0 text-gray-800">Éditer le post: {{ post.title }}</h1>
</div>

<div class="card shadow mb-4">
  <div class="card-body">
    <form method="POST">
      <div class="mb-3">
        <label for="title" class="form-label">Titre du post *</label>
          <input type="text" class="form-control" id="title" name="title" placeholder="Entrez le titre du post" value="{{ post.title|default('') }}">
          <div class="invalid-feedback" style="display:block; color:#dc3545; font-size:12px; margin-top:4px;">{{ (errors.title is defined) ? errors.title|join(', ') : '' }}</div>
      </div>

      <div class="mb-3">
        <label for="author" class="form-label">Auteur *</label>
          <input type="text" class="form-control" id="author" name="author" placeholder="Votre nom" value="{{ post.author|default('') }}">
          <div class="invalid-feedback" style="display:block; color:#dc3545; font-size:12px; margin-top:4px;">{{ (errors.author is defined) ? errors.author|join(', ') : '' }}</div>
      </div>

      <div class="mb-3">
        <label for="content" class="form-label">Contenu du post *</label>
          <textarea class="form-control" id="content" name="content" rows="8" placeholder="Contenu du post">{{ post.content|default('') }}</textarea>
          <div class="invalid-feedback" style="display:block; color:#dc3545; font-size:12px; margin-top:4px;">{{ (errors.content is defined) ? errors.content|join(', ') : '' }}</div>
      </div>

      <div class="mb-3">
        <label for="image" class="form-label">URL de l'image (optionnel)</label>
          <input type="text" class="form-control" id="image" name="image" placeholder="https://exemple.com/image.jpg" value="{{ post.image|default('') }}">
          <div class="invalid-feedback" style="display:block; color:#dc3545; font-size:12px; margin-top:4px;">{{ (errors.image is defined) ? errors.image|join(', ') : '' }}</div>
      </div>

      <div class="mb-3">
        <label for="tags" class="form-label">Tags (optionnel)</label>
        <input type="text" class="form-control" id="tags" name="tags" placeholder="tag1, tag2, tag3" value="{{ post.tags|default('') }}">
        <div class="invalid-feedback" style="display:block; color:#dc3545; font-size:12px; margin-top:4px;">{{ (errors.tags is defined) ? errors.tags|join(', ') : '' }}</div>
      </div>

      <div class="alert alert-info">
        <strong>Informations du post:</strong><br>
        Créé le: {{ post.createdAt|date('d/m/Y H:i:s') }}<br>
        Modifié le: {{ post.updatedAt ? post.updatedAt|date('d/m/Y H:i:s') : 'Jamais' }}<br>
        Vues: {{ post.views }}
      </div>

      <div class="d-flex gap-2">
        <button type="submit" class="btn btn-primary">
          <i class="fas fa-save"></i> Mettre à jour
        </button>
        <a href="{{ path('app_admin_posts') }}" class="btn btn-secondary">
          <i class="fas fa-times"></i> Annuler
        </a>
      </div>
    </form>
  </div>
</div>

{% endblock %}
